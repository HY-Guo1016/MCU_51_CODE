C51 COMPILER V9.60.0.0   DISPLAY                                                           02/14/2023 00:09:59 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DISPLAY
OBJECT MODULE PLACED IN ..\Output\display.obj
COMPILER INVOKED BY: d:\Keil_v5\C51\BIN\C51.EXE ..\Source\display.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(..
                    -\Listings\display.lst) OBJECT(..\Output\display.obj)

line level    source

   1          #include "display.h"
   2          
   3                  unsigned char code leddata[]={ 
   4           
   5                          0x3F,  //"0"  0
   6                          0x06,  //"1"  1
   7                          0x5B,  //"2"  2
   8                          0x4F,  //"3"  3
   9                          0x66,  //"4"  4
  10                          0x6D,  //"5"  5
  11                          0x7D,  //"6"  6
  12                          0x07,  //"7"  7
  13                          0x7F,  //"8"  8
  14                          0x6F,  //"9"  9
  15                          0x77,  //"A"  10 
  16                          0x7C,  //"B"  11
  17                          0x39,  //"C"  12
  18                          0x5E,  //"D"  13
  19                          0x79,  //"E"  14
  20                          0x71,  //"F"  15
  21                          0x76,  //"H"  16
  22                          0x38,  //"L"  17 
  23                          0x37,  //"n"  18 
  24                          0x3E,  //"u"  19 
  25                          0x73,  //"P"  20
  26                          0x5C,  //"o"  21
  27                          0x40,  //"-"  22
  28                          0x00,  //熄灭 23
  29                          0x00  //自定义
  30           
  31                                   };
  32                  //段选动态数码管
  33                  unsigned char code HC138[] = {0xE3,0xE7,0xEB,0xEF,0xF3,0xF7,0xFB,0xFF};
  34                          
  35                          //{0xFF,0xFB,0xF7,0xF3,0xEF,0xEB,0xE7,0xE3};
  36                  
  37                  //位选动态数码管
  38                  unsigned char LEDBUF[] = {8,8,8,8,8,8,8,8};
  39                  //数据缓冲区 
  40                  
  41          void display()
  42          {
  43   1              
  44   1              static unsigned char i = 0;
  45   1              switch(i)
  46   1              {
  47   2              case 0:
  48   2              //实现消影      
  49   2              GPIO_DIG = 0x00;
  50   2              //进行段选
  51   2              GPIO_DIG = leddata[LEDBUF[0]];
  52   2              //然后进行位选
  53   2              GPIO_PLACE = HC138[0];
  54   2              //通过i实现动态数码管
C51 COMPILER V9.60.0.0   DISPLAY                                                           02/14/2023 00:09:59 PAGE 2   

  55   2              i++;
  56   2              break;
  57   2              
  58   2              case 1:
  59   2              //实现消影      
  60   2              GPIO_DIG = 0x00;
  61   2              //进行段选
  62   2              GPIO_DIG = leddata[LEDBUF[1]];
  63   2              //然后进行位选
  64   2              GPIO_PLACE = HC138[1];
  65   2              //通过i实现动态数码管
  66   2              i++;
  67   2              break;
  68   2              
  69   2              case 2:
  70   2              //实现消影      
  71   2              GPIO_DIG = 0x00;
  72   2              //进行段选
  73   2              GPIO_DIG = leddata[LEDBUF[2]];
  74   2              //然后进行位选
  75   2              GPIO_PLACE = HC138[2];
  76   2              //通过i实现动态数码管
  77   2              i++;
  78   2              break;
  79   2              
  80   2              case 3:
  81   2              //实现消影      
  82   2              GPIO_DIG = 0x00;
  83   2              //进行段选
  84   2              GPIO_DIG = leddata[LEDBUF[3]];
  85   2              //然后进行位选
  86   2              GPIO_PLACE = HC138[3];
  87   2              //通过i实现动态数码管
  88   2              i++;
  89   2              break;          
  90   2              
  91   2              case 4:
  92   2              //实现消影      
  93   2              GPIO_DIG = 0x00;
  94   2              //进行段选
  95   2              GPIO_DIG = leddata[LEDBUF[4]];
  96   2              //然后进行位选
  97   2              GPIO_PLACE = HC138[4];
  98   2              //通过i实现动态数码管
  99   2              i++;
 100   2              break;
 101   2              
 102   2              case 5:
 103   2              //实现消影      
 104   2              GPIO_DIG = 0x00;
 105   2              //进行段选
 106   2              GPIO_DIG = leddata[LEDBUF[5]];
 107   2              //然后进行位选
 108   2              GPIO_PLACE = HC138[5];
 109   2              //通过i实现动态数码管
 110   2              i++;
 111   2              break;
 112   2              
 113   2              case 6:
 114   2              //实现消影      
 115   2              GPIO_DIG = 0x00;
 116   2              //进行段选
C51 COMPILER V9.60.0.0   DISPLAY                                                           02/14/2023 00:09:59 PAGE 3   

 117   2              GPIO_DIG = leddata[LEDBUF[6]];
 118   2              //然后进行位选
 119   2              GPIO_PLACE = HC138[6];
 120   2              //通过i实现动态数码管
 121   2              i++;
 122   2              break;
 123   2              
 124   2              case 7:
 125   2              //实现消影      
 126   2              GPIO_DIG = 0x00;
 127   2              //进行段选
 128   2              GPIO_DIG = leddata[LEDBUF[7]];
 129   2              //然后进行位选
 130   2              GPIO_PLACE = HC138[7];
 131   2              //通过i实现动态数码管
 132   2              i = 0;
 133   2              break;
 134   2              
 135   2              default: break;
 136   2              }
 137   1      
 138   1      }
 139                  
 140                  
 141                  
 142                  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    180    ----
   CONSTANT SIZE    =     33    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      9    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
